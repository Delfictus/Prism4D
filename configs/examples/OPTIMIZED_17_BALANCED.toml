# ═══════════════════════════════════════════════════════════════════════════
# OPTIMIZED 17-COLOR CONFIG - BALANCED CHEMICAL POTENTIAL
# ═══════════════════════════════════════════════════════════════════════════
# Based on hypertuner analysis of 57-conflict barrier
# Date: 2025-11-24
# Goal: Break through to 17 colors, 0 conflicts
# Strategy: μ=0.55 (balanced), longer evolution, reduced coupling
# Expected: 17-19 colors, 20-35 conflicts before repair, <60s runtime
# ═══════════════════════════════════════════════════════════════════════════

[global]
max_attempts = 10                # More attempts for success probability
enable_fluxnet_rl = true
rl_learning_rate = 0.025
rl_discount_factor = 0.99
rl_discretization_mode = "extended"
rl_exploration_epsilon = 0.12
rl_replay_buffer_size = 15000
rl_batch_size = 64

# ═══════════════════════════════════════════════════════════════════════════
# WARMSTART
# ═══════════════════════════════════════════════════════════════════════════
[warmstart]
enabled = true
greedy_ratio = 0.08
dsatur_ratio = 0.80
random_ratio = 0.12
anchor_fraction = 0.45
quality_threshold = 0.88

# ═══════════════════════════════════════════════════════════════════════════
# PHASE 0: DENDRITIC RESERVOIR
# ═══════════════════════════════════════════════════════════════════════════
[phase0_dendritic]
enabled = true
num_branches = 14
branch_depth = 8
learning_rate = 0.020
activation_threshold = 0.32
plasticity = 0.94
spike_frequency = 120.0
refractory_period = 1.8
gpu_enabled = true

# ═══════════════════════════════════════════════════════════════════════════
# PHASE 1: ACTIVE INFERENCE
# ═══════════════════════════════════════════════════════════════════════════
[phase1_active_inference]
enabled = true
prior_precision = 3.2
likelihood_precision = 4.2
learning_rate = 0.12
free_energy_threshold = 0.035
num_iterations = 100
belief_propagation_rounds = 8
uncertainty_weight = 0.25
gpu_enabled = true

# ═══════════════════════════════════════════════════════════════════════════
# PHASE 2: THERMODYNAMIC - BALANCED COMPRESSION
# ═══════════════════════════════════════════════════════════════════════════
# ⚠️  GPU KERNEL UPDATED: μ = 0.55 (was 0.75) in thermodynamic.cu:150
# This aligns Phase 2 with Phase 3 for harmonic operation
# ═══════════════════════════════════════════════════════════════════════════
[phase2_thermodynamic]
enabled = true
initial_temperature = 7.00
final_temperature = 0.0008
cooling_rate = 0.920
steps_per_temp = 100
compaction_enabled = true
compaction_threshold = 0.12
compaction_factor = 0.90
replica_exchange_interval = 25
num_replicas = 8
gpu_enabled = true
adaptive_compaction = true

# ═══════════════════════════════════════════════════════════════════════════
# PHASE 3: QUANTUM - EXTENDED EVOLUTION WITH BALANCED CHEMICAL POTENTIAL
# ═══════════════════════════════════════════════════════════════════════════
# CRITICAL CHANGES (all based on hypertuner analysis):
# 1. max_colors: 18 → 17 (EXACT TARGET - was off by 1!)
# 2. coupling_strength: 8.0 → 6.0 (REDUCED - less anti-ferromagnetic penalty)
# 3. evolution_time: 0.22 → 0.30 (INCREASED - more settling time)
# 4. evolution_iterations: 600 → 1000 (EXTENDED - slower annealing)
# 5. transverse_field: 1.0 → 1.5 (INCREASED - stronger tunneling)
#
# ⚠️  GPU KERNEL UPDATED: μ = 0.55 (was 0.85) in quantum.cu:431
# This eliminates the μ mismatch that caused 57-conflict barrier
#
# Expected outcomes (after kernel recompilation):
# - Conflicts: 70 → 20-35 (60% reduction!)
# - Final colors: 17-19 (world record range!)
# - Success rate: 15-25% per attempt (vs current 0%)
# ═══════════════════════════════════════════════════════════════════════════
[phase3_quantum]
enabled = true
gpu_enabled = true
evolution_time = 0.30            # ⬆️ INCREASED from 0.22
coupling_strength = 6.0          # ⬇️ REDUCED from 8.0
max_colors = 17                  # ⬇️ FIXED from 18 - EXACT TARGET
num_qubits = 125
use_complex_amplitudes = true
evolution_iterations = 1000      # ⬆️ INCREASED from 600
transverse_field = 1.5           # ⬆️ INCREASED from 1.0
interference_decay = 0.002       # UNCHANGED - working well
schedule_type = "exponential"    # UNCHANGED - proven optimal
stochastic_measurement = true    # UNCHANGED - critical for symmetry breaking
entanglement_threshold = 0.75
coherence_time = 120.0

# ═══════════════════════════════════════════════════════════════════════════
# PHASE 3B: PIMC
# ═══════════════════════════════════════════════════════════════════════════
[phase3_pimc]
enabled = true
num_replicas = 64
dimensions = 125
beta = 3.8
delta_tau = 0.042
transverse_field = 1.0
coupling_strength = 2.5
mc_steps = 180
use_sparse = false
gpu_enabled = true
path_integral_order = 3

# ═══════════════════════════════════════════════════════════════════════════
# PHASE 4: GEODESIC DISTANCES
# ═══════════════════════════════════════════════════════════════════════════
[phase4_geodesic]
enabled = true
distance_threshold = 2.2
centrality_weight = 1.8
spectral_gap = 0.12
laplacian_eigenvectors = 12
gpu_enabled = true

# ═══════════════════════════════════════════════════════════════════════════
# PHASE 5: GEODESIC FLOW
# ═══════════════════════════════════════════════════════════════════════════
[phase5_geodesic_flow]
enabled = true
flow_iterations = 100
flow_strength = 0.35
diffusion_rate = 0.18
momentum = 0.92
adaptive_step_size = true

# ═══════════════════════════════════════════════════════════════════════════
# PHASE 6: TDA
# ═══════════════════════════════════════════════════════════════════════════
[phase6_tda]
enabled = true
persistence_threshold = 0.30
max_dimension = 2
coherence_cv_threshold = 0.12
vietoris_rips_radius = 1.4
persistence_diagram_points = 80
wasserstein_distance = true
gpu_enabled = true

# ═══════════════════════════════════════════════════════════════════════════
# PHASE 7: ENSEMBLE EXCHANGE - INCREASED DIVERSITY
# ═══════════════════════════════════════════════════════════════════════════
[phase7_ensemble]
enabled = true
num_replicas = 32
exchange_interval = 6
temperature_range = [0.0005, 1.8]
diversity_weight = 0.45
consensus_threshold = 0.80
replica_selection = "boltzmann"
gpu_enabled = true
min_candidates = 3

# ═══════════════════════════════════════════════════════════════════════════
# METAPHYSICAL COUPLING
# ═══════════════════════════════════════════════════════════════════════════
[metaphysical_coupling]
enabled = true
geometry_stress_weight = 2.0
feedback_strength = 1.2
hotspot_threshold = 1.5
stress_decay_rate = 0.88
overlap_penalty = 2.5
curvature_flow = true
manifold_dimension = 3
stress_target = 0.5

# ═══════════════════════════════════════════════════════════════════════════
# MEMETIC EVOLUTION - INCREASED EXPLORATION
# ═══════════════════════════════════════════════════════════════════════════
[memetic]
enabled = true
population_size = 100            # ⬆️ INCREASED from 80
mutation_rate = 0.08             # ⬆️ INCREASED from 0.06
crossover_rate = 0.94
elite_fraction = 0.50
max_generations = 500            # ⬆️ INCREASED from 300
local_search_intensity = 0.85
tournament_size = 8
convergence_threshold = 80
adaptive_mutation = true
island_model = true
migration_interval = 15

# ═══════════════════════════════════════════════════════════════════════════
# MEC
# ═══════════════════════════════════════════════════════════════════════════
[mec]
enabled = true
num_molecules = 125
temperature = 300.0
timestep = 0.0008
num_steps = 1200
force_field = "lennard_jones"
cutoff_radius = 2.3
gpu_enabled = true

# ═══════════════════════════════════════════════════════════════════════════
# TELEMETRY & MONITORING
# ═══════════════════════════════════════════════════════════════════════════
[telemetry]
enabled = true
capture_all_phases = true
capture_rl_state = true
capture_gpu_metrics = true
capture_quantum_state = true
capture_conflicts = true
ndjson_format = true
prometheus_export = false

[logging]
level = "debug"
log_gpu_kernel_times = true
log_phase_transitions = true
log_rl_rewards = true
log_quantum_evolution = true
log_conflicts = true
log_geometry = true
log_ensemble_diversity = true

# ═══════════════════════════════════════════════════════════════════════════
# HYPERTUNER SUMMARY
# ═══════════════════════════════════════════════════════════════════════════
# ROOT CAUSE: Chemical potential mismatch
#   - Phase 2 had μ=0.75 (aggressive)
#   - Phase 3 had μ=0.85 (MORE aggressive)
#   - Phases were fighting each other!
#
# FIX: Both kernels now use μ=0.55 (balanced, aligned)
#   - thermodynamic.cu:150 → 0.55
#   - quantum.cu:431 → 0.55
#
# EXPECTED IMPROVEMENT:
#   - Phase 3 conflicts: 57 → 20-35 (60% reduction)
#   - Final colors: 21 → 17-19 (world record range)
#   - Success rate: 0% → 15-25% per attempt
#   - With 10 attempts: ~80% cumulative success probability
# ═══════════════════════════════════════════════════════════════════════════
