# PRISM v2 Archive Policy

## Overview

On **2025-11-18**, a comprehensive cleanup operation was performed on the `prism-v2-refactor` branch to streamline the repository and reduce clutter. Historical documentation, generated artifacts, and legacy status reports were moved to `staging_cleanup/` to maintain git history while improving repository navigability.

## What Was Archived

### Legacy Documentation (177 files → 3 files)

Over 170 markdown files from the root directory were moved to `staging_cleanup/docs/`:

- **legacy_status/** - Status reports, completion documents, milestone tracking
  - Examples: `GPU_MILESTONE_COMPLETE.md`, `PHASE*_COMPLETE.md`, `*_STATUS.md`, `*_VERIFICATION_REPORT.md`
  - Purpose: Historical development tracking superseded by git history and current docs

- **legacy_plans/** - Old implementation strategies and roadmaps
  - Examples: `COMPLETE-PRCT-GPU-IMPLEMENTATION-PLAN.md`, `CLEANUP_ACTION_PLAN.md`, `BEATING_WORLD_RECORD_STRATEGY.md`
  - Purpose: Planning documents superseded by docs/spec/ architecture

- **architecture_review/** - Historical architecture documents
  - Examples: `ACTUAL_GPU_ARCHITECTURE.md`, `ARCHITECTURE_MAP.md`, `BUILD_ORDER_VISUAL.md`
  - Purpose: Design docs that may contain useful historical context

### Binary Artifacts (~32 MB)

- **baseline-v1.0/** - 8 compiled binaries from v1.0 release (23.8 MB)
  - `federated-sim`, `meta-*`, `protein_structure_benchmark`, `simple_dimacs_benchmark`
  - Regenerable from source code

- **prism-ai-baseline-v1.0.tar.gz** - v1.0 release tarball (8.3 MB)
  - Historical release archive, superseded by v2.0

- **cuda-keyring_*.deb** - External CUDA repository keys
  - Re-downloadable from NVIDIA repos

### Backup Files

- **Dockerfile.fix** - Temporary Dockerfile variant
- ***.launcher-backup** - Editor/IDE backup files from foundation/

### Generated Build Artifacts (3.9 GB DELETED)

- **target/** directory - Cargo build artifacts, dependencies, compiled PTX kernels
- **output/** directory - Runtime artifacts (if present)

These are regenerated by `cargo build` and not committed to git.

## What Remains

### Essential Documentation (Kept in Root)

- `README.md` - Primary project documentation (NEW: consolidated from README-*.md)
- `ARCHIVE_POLICY.md` - This file
- `README_PROFILING.md` - Profiling guide (retained for reference)
- `README_QUICK_START.md` - Quick start guide (retained for reference)

### Active Codebase

- **prism-*/**: All 6 workspace crates (prism-core, prism-gpu, prism-fluxnet, prism-phases, prism-pipeline, prism-cli)
- **foundation/**: Legacy modules still referenced by workspace (shared-types, prct-core, quantum, neuromorphic)
- **docs/**: Current specification and documentation
- **scripts/**: Build and deployment automation
- **dashboards/**: Grafana monitoring configs
- **.github/workflows/**: CI/CD pipelines
- **benchmarks/dimacs/**: Test graphs
- **data/**: Research datasets

## Repository Size Impact

| Category | Before Cleanup | After Cleanup | Savings |
|----------|----------------|---------------|---------|
| Total | 4.0 GB | 54 MB | 3.95 GB (98.6%) |
| Target/ | 3.9 GB | 0 GB | 3.9 GB |
| Binaries | 32 MB | 0 MB | 32 MB |
| Root Docs | 177 files (~1 MB) | 4 files | 173 files |

## Retrieving Archived Files

All archived files remain in git history and can be accessed using standard git commands.

### View Archived File Contents

```bash
# Find when a file was moved to staging
git log --follow -- staging_cleanup/docs/legacy_status/GPU_MILESTONE_COMPLETE.md

# View file at a specific commit
git show <commit-hash>:GPU_MILESTONE_COMPLETE.md

# View file before it was moved
git show HEAD~10:GPU_MILESTONE_COMPLETE.md
```

### Restore an Archived File

```bash
# Restore to working tree (does not commit)
git checkout <commit-hash> -- path/to/original/file.md

# Example: Restore a specific status report
git log --all --full-history -- "**/PHASE2_COMPLETE.md"
git checkout <found-commit> -- PHASE2_COMPLETE.md
```

### Browse Staging Area

```bash
# List all archived files
find staging_cleanup/ -type f

# Count by category
find staging_cleanup/docs/legacy_status/ -type f | wc -l
find staging_cleanup/artifacts/ -type f | wc -l
```

## Regenerating Artifacts

### Build Artifacts

```bash
# Regenerate target/ (CPU mode)
cargo build --release

# Regenerate with CUDA support
cargo build --release --features cuda
```

### PTX Kernels

```bash
./scripts/compile_ptx.sh quantum
./scripts/compile_ptx.sh floyd_warshall
./scripts/compile_ptx.sh dendritic_reservoir
```

### Documentation

```bash
# Generate API docs
cargo doc --workspace --no-deps --open

# Rebuild telemetry schemas
sqlite3 output/telemetry/metrics.db < scripts/migrations/V1_initial.sql
```

## Future Cleanup Considerations

### Periodic Review Schedule

- **Quarterly**: Review staging_cleanup/ for permanent removal candidates
- **Annually**: Evaluate foundation/ modules for migration to prism-* or removal
- **Before major releases**: Audit for outdated documentation in docs/

### Permanent Removal (Use with Caution)

If staged files are confirmed unnecessary after 6+ months:

```bash
# Remove staging area from working tree
git rm -r staging_cleanup/

# Commit removal
git commit -m "chore: Remove archived files after 6-month review"

# Optional: Rewrite history to reduce repo size (DANGEROUS - coordinate with team)
git filter-branch --tree-filter 'rm -rf staging_cleanup' --prune-empty HEAD
git push --force  # Only if coordinated!
```

**WARNING**: Rewriting history affects all collaborators. Use BFG Repo-Cleaner or git-filter-repo for safer large file removal.

## .gitignore Updates

The following patterns were added to `.gitignore` during cleanup:

```gitignore
# Generated artifacts
*.deb
*.tar.gz
*.tgz
output/

# Editor backups
*.swp
*.swo
*~
*.launcher-backup
```

This ensures future generated files and backups are not accidentally committed.

## Verification

After cleanup, the following checks passed:

- ✅ `cargo fmt --all --check` - All code formatted
- ✅ `cargo check --workspace --no-default-features` - Compiles successfully
- ✅ Repository size reduced from 4.0 GB to 54 MB
- ✅ No references to `staging_cleanup/` in source code
- ✅ All 6 prism-* crates present and buildable
- ✅ Git history intact (all files recoverable)

## Related Documentation

- [README.md](README.md) - Primary project documentation
- [docs/spec/prism_gpu_plan.md](docs/spec/prism_gpu_plan.md) - Current specification
- [staging_cleanup/README.md](staging_cleanup/README.md) - Detailed inventory of archived files

## Questions?

For questions about archived files or cleanup decisions:

1. Check `reports/cleanup_inventory.md` for detailed inventory
2. Check `reports/cleanup_summary.md` for verification results
3. Review git log for specific file history
4. Contact: architecture@example.com

---

**Cleanup Date**: 2025-11-18
**Branch**: cleanup-playground
**Full Backup**: /mnt/c/Users/Predator/Desktop/PRISM-v2-full-backup-20251118.tar.gz
**Agent**: prism-architect
