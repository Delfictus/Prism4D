# DSJC500 World Record Configuration v1
# Optimized based on telemetry from live_metrics_dsjc500_20251114_180800_20251115_020800.jsonl
#
# Key improvements:
# - Increased steps_per_temp from 2000→3000 to 12000 for better midband exploration
# - Enabled aggressive_midband to force 7→3 temperature burn-in
# - Added compaction guards to auto-expand slack when ratios collapse
# - Increased memetic diversity (larger population, higher mutation)
# - Extended generations to avoid premature early stopping

[metadata]
version = "1.0"
target_graph = "DSJC500.5"
created_date = "2025-11-15"
purpose = "Tighten thermo burn-in and memetic diversity based on Phase 2/4 telemetry"

# ══════════════════════════════════════════════════════════════
# MEMETIC ALGORITHM CONFIGURATION
# ══════════════════════════════════════════════════════════════
[memetic]
# Increased from 256 to 320 (+25% pool) for more diversity
population_size = 320

# Smaller elite (from 32 → 24) to keep diversity high
elite_size = 24

# Extended from ~300-500 to 900 to avoid premature stopping
# Previous run hit "no improvement for 20 generations" too early
generations = 900

# Increased from 0.15 → 0.22 for more exploration
mutation_rate = 0.22

# Local search depth (unchanged from typical values)
local_search_depth = 24000

# ══════════════════════════════════════════════════════════════
# THERMODYNAMIC SAMPLING CONFIGURATION
# ══════════════════════════════════════════════════════════════
[thermo]
# Number of parallel replicas
replicas = 48

# Number of temperature points
num_temps = 48

# Replica exchange interval (steps between swaps)
exchange_interval = 25

# Minimum temperature (cold end)
t_min = 0.002

# Maximum temperature (hot end)
# Consider 1.8 if you want a longer high-temp nose for better exploration
# Telemetry suggested this might help escape high-conflict regions
t_max = 1.5

# CRITICAL FIX: Increased from 2000-3000 → 12000 (4× boost)
# Telemetry showed temps 1-3 stuck at 543-555 conflicts with only 8k/10k dynamic steps
# Pipeline guidance: "increase steps_per_temp"
steps_per_temp = 12000

# CRITICAL FIX: Enable aggressive midband
# Telemetry showed aggressive_midband=false prevented proper 7→3 burn-in
aggressive_midband = true

# ══════════════════════════════════════════════════════════════
# COMPACTION GUARD CONFIGURATION
# ══════════════════════════════════════════════════════════════
# Auto-expand color slack when compaction ratios collapse
# Telemetry showed T≈4.8 compaction ratio ~0.30 with 150+ conflicts
# These guards trigger reheat and slack expansion automatically
[thermo.compaction]
# Start applying compaction force at temp index 9
force_start_temp = 9

# Maximum blend factor for forced compaction
max_force_blend_factor = 0.4

# If ratio drops below 0.25, expand color range
color_range_expand_threshold = 0.25

# Expand by 20% when threshold hit
color_range_expand_percent = 20

# Trigger reheat after 3 consecutive guard activations
reheat_consecutive_guards = 3

# Boost temperature by 1.4× during reheat
reheat_temp_boost = 1.4
